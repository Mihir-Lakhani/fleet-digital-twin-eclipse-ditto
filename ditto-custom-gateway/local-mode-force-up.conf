# Custom Ditto Gateway Configuration - Force Single Node
# This configuration completely overrides all clustering behavior

# Override the default startup behavior
ditto.gateway {
  bootstrap.force-up = true
  bootstrap.force-up = ${?DITTO_GATEWAY_BOOTSTRAP_FORCE_UP}
  
  http {
    hostname = "0.0.0.0"
    port = 8080
  }
  
  authentication {
    devops.password = "devops"
    status.password = "status"
  }
}

# Critical: Override all cluster configurations  
pekko {
  actor.provider = "local"  # Use local actor system instead of cluster
  
  # Disable all clustering entirely
  cluster.enabled = false
  
  # Disable remoting since we're using local provider
  remote.enabled = false
  
  # Disable management extensions
  management.enabled = false
  
  # HTTP server configuration
  http {
    server {
      bind-timeout = 5s
      idle-timeout = 60s
    }
  }
  
  loggers = ["org.apache.pekko.event.slf4j.Slf4jLogger"]
  loglevel = "INFO"
  logging-filter = "org.apache.pekko.event.slf4j.Slf4jLoggingFilter"
}

# Override any base configurations that might enable clustering
include "ditto-base"

# Ensure MongoDB connection works in local mode
pekko.persistence.mongodb.mongo {
  driver = "pekko.persistence.mongodb.MongoPersistenceExtension"
}