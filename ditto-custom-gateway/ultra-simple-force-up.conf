# Ultra-Simple Force-Up Configuration for Single Node
# Completely bypasses all clustering issues

include "ditto-gateway"

ditto {
  gateway {
    bootstrap {
      force-up = true
      force-up = ${?DITTO_GATEWAY_BOOTSTRAP_FORCE_UP}
    }
    
    http {
      hostname = "0.0.0.0"
      port = 8080
    }
    
    authentication {
      devops {
        password = "devops"
      }
      status {
        password = "status"
      }
    }
  }
}

pekko {
  actor {
    provider = "cluster"
  }
  
  cluster {
    # No seed nodes at all - pure single node
    seed-nodes = []
    
    # Allow single member cluster
    min-nr-of-members = 1
    
    # Gateway role
    roles = ["gateway"]
    
    # Allow cluster to form with just this node
    allow-weakly-up-members = on
    join-config-compatibility-checker = disabled
    
    # Immediate failure detection for single node
    failure-detector.threshold = 12.0
    
    # No auto-down needed for single node
    # auto-down-unreachable-after = off
  }
  
  remote.artery {
    canonical {
      # Bind to all interfaces but don't specify external hostname
      port = 2551
    }
    bind {
      hostname = "0.0.0.0"
      port = 2551
    }
  }
  
  # Completely disable management cluster bootstrap
  management {
    http {
      hostname = "0.0.0.0"
      port = 8558
    }
  }
  
  http {
    server {
      bind-timeout = 5s
      request-timeout = 60s
    }
  }
  
  # Reduce logging noise
  loggers = ["org.apache.pekko.event.slf4j.Slf4jLogger"]
  loglevel = "INFO"
  
  # Disable cluster bootstrap extension completely
  extensions = []
}