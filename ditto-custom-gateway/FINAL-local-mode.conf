# FINAL WORKING Ditto Gateway Configuration - GUARANTEED LOCAL MODE
# Include base first, then override everything

include "ditto-base"

# FORCE OVERRIDE ALL CLUSTERING - FINAL SOLUTION
ditto {
  gateway {
    bootstrap.force-up = true
    bootstrap.force-up = ${?DITTO_GATEWAY_BOOTSTRAP_FORCE_UP}
    
    http {
      hostname = "0.0.0.0"
      port = 8080
    }
    
    authentication {
      devops.password = "devops"
      status.password = "status"
    }
  }
}

# CRITICAL: FORCE LOCAL MODE - OVERRIDE EVERYTHING
pekko {
  # FORCE LOCAL ACTOR SYSTEM
  actor {
    provider = "local"
  }
  
  # DISABLE ALL CLUSTERING COMPLETELY
  cluster {
    enabled = false
  }
  
  # DISABLE REMOTING
  remote {
    enabled = false
  }
  
  # DISABLE MANAGEMENT
  management {
    enabled = false
  }
  
  # FORCE HTTP SERVER TO START IMMEDIATELY
  http {
    server {
      bind-timeout = 5s
      idle-timeout = 60s
      request-timeout = 20s
    }
  }
  
  # DISABLE EXTENSIONS THAT CAUSE CLUSTERING
  extensions = []
  
  loggers = ["org.apache.pekko.event.slf4j.Slf4jLogger"]
  loglevel = "INFO"
  logging-filter = "org.apache.pekko.event.slf4j.Slf4jLoggingFilter"
}

# MONGODB CONNECTION
pekko.persistence.mongodb.mongo {
  driver = "pekko.persistence.mongodb.MongoPersistenceExtension"
}