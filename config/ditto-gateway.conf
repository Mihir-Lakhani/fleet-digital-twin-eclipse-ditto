# Custom Eclipse Ditto Gateway Configuration
# Explicitly disables Pekko clustering to enable single-node HTTP API access
# This overrides the hardcoded clustering requirements in Ditto 3.4.0

# Include the default configuration first
include "ditto-gateway"

# Override clustering settings with local actor provider
pekko {
  actor {
    provider = "local"  # Use local actor provider instead of cluster
    warn-about-java-serializer-usage = false
  }
  
  # Disable remoting completely
  remote {
    enabled-transports = []
    artery.enabled = false
  }
  
  # Explicitly disable cluster bootstrap and discovery
  cluster {
    enabled = false
    bootstrap {
      enabled = false
      required-contact-point-nr = 0
    }
    seed-nodes = []
    downing-provider-class = ""
    auto-down-unreachable-after = off
  }
  
  # Disable cluster management extensions
  management {
    enabled = false
    cluster.bootstrap.enabled = false
  }
  
  # Disable discovery mechanism
  discovery {
    method = "config"
    config.services = {}
  }
  
  # Logging configuration
  loglevel = "INFO"
  loggers = ["org.apache.pekko.event.slf4j.Slf4jLogger"]
  logging-filter = "org.apache.pekko.event.slf4j.Slf4jLoggingFilter"
}

# Ditto specific configuration overrides
ditto {
  gateway {
    # HTTP configuration
    http {
      hostname = "0.0.0.0"
      port = 8080
    }
    
    # Authentication settings
    authentication {
      enabled = true
      devops {
        enabled = true
        username = "ditto"
        password = "ditto"
      }
      dummy {
        enabled = true
      }
    }
    
    # Health check settings
    health-check {
      enabled = true
      interval = 30s
      persistence {
        enabled = false
      }
    }
  }
  
  # MongoDB connection
  mongodb {
    hostname = "mongodb"
    port = 27017
    database = "ditto"
  }
}