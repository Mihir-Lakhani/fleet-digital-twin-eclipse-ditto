# Minimal Valid Eclipse Ditto 3.5.0 Configuration
# This configuration eliminates syntax errors and provides basic cluster functionality

pekko {
  actor.provider = "cluster"
  
  remote.artery {
    transport = "tcp"
    canonical {
      hostname = ${HOSTNAME}
      port = 2551
    }
    bind {
      hostname = "0.0.0.0"
      port = 2551
    }
  }
  
  management {
    cluster.bootstrap {
      contact-point-discovery {
        discovery-method = "config"
        required-contact-point-nr = 0
      }
      new-cluster-enabled = on
    }
    http {
      hostname = "0.0.0.0"
      port = 8558
    }
  }
  
  cluster {
    seed-nodes = [
      "pekko://ditto-cluster@ditto-policies:2551",
      "pekko://ditto-cluster@ditto-things:2551", 
      "pekko://ditto-cluster@ditto-gateway:2551"
    ]
    min-nr-of-members = 1
    
    downing-provider-class = "org.apache.pekko.cluster.sbr.SplitBrainResolverProvider"
    split-brain-resolver {
      active-strategy = "static-quorum"
      static-quorum {
        quorum-size = 1
        role = ""
      }
    }
  }
}

ditto {
  gateway {
    http {
      hostname = "0.0.0.0"
      port = 8080
      enable = true
    }
    
    cluster {
      number-of-shards = 1
      majority-check-enabled = false
    }
    
    authentication {
      dummy {
        dummy = true
      }
    }
    
    health-check {
      cluster-roles {
        enabled = false
      }
    }
  }
  
  service-discovery {
    method = "config"
  }
  
  policies {
    cluster {
      enabled = false
    }
  }
  
  things {
    cluster {
      enabled = false
    }
  }
}