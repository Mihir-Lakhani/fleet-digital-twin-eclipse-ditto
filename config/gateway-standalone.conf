# STANDALONE DITTO GATEWAY CONFIGURATION
# No clustering - pure local mode for immediate HTTP API access

# FORCE LOCAL ACTOR SYSTEM - NO CLUSTERING AT ALL
pekko {
  actor.provider = "local"  # âœ… No clustering whatsoever
  
  # Disable all clustering completely
  cluster.enabled = false
  
  # Disable remoting
  remote.enabled = false
  
  # Disable management cluster features
  management {
    cluster.bootstrap.enabled = false
    http {
      hostname = "0.0.0.0"
      port = 8558
    }
  }
  
  # Force HTTP server to start immediately
  http {
    server {
      bind-hostname = "0.0.0.0"
      bind-port = 8080
      server-header = "Eclipse Ditto"
    }
    client {
      connecting-timeout = 10s
      idle-timeout = 60s
    }
  }
  
  # Disable extensions that cause clustering
  extensions = []
  
  loggers = ["org.apache.pekko.event.slf4j.Slf4jLogger"]
  loglevel = "INFO"
  logging-filter = "org.apache.pekko.event.slf4j.Slf4jLoggingFilter"
}

# Ditto Gateway-Only Configuration
ditto {
  gateway {
    http {
      hostname = "0.0.0.0"
      port = 8080
    }
    
    authentication {
      dummy {
        dummy = true
      }
      devops {
        password = "devops" 
        secured = false
      }
    }
    
    # Health check configuration
    health-check {
      enabled = true
      interval = 60s
      service.timeout = 10s
    }
    
    # Disable cluster-dependent features
    cluster.enabled = false
  }
}

# Direct MongoDB connection (bypass other services)
pekko.persistence.mongodb.mongo {
  mongouri = "mongodb://"${MONGO_DB_HOSTNAME}":27017/ditto"
  database = "ditto"
  pool {
    minSize = 1
    maxSize = 10
    maxWaitTime = 30s
  }
}